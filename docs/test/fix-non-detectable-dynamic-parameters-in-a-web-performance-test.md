---
title: Naprawa niewykrywalnych parametrów dynamicznych w teście wydajności sieci web w programie Visual Studio | Dokumentacja firmy Microsoft
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- walkthroughs, load tests
- load tests, walkthroughs
- load tests, correlating dynamic parameters
ms.assetid: 92dff25c-36ee-4135-acdd-315c4962fa11
author: gewarren
ms.author: gewarren
manager: douge
ms.technology: vs-ide-test
ms.openlocfilehash: a696f03e715e2b3bede34f45bce90596a14897aa
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/16/2018
---
# <a name="fix-non-detectable-dynamic-parameters-in-a-web-performance-test"></a>Naprawa niewykrywalnych parametrów dynamicznych w teście wydajności sieci Web

Niektóre witryny sieci Web używać parametrów dynamicznych do przetwarzania niektóre z ich żądań sieci web. Parametr dynamiczny jest parametrem, którego wartość jest generowany ponownie każdym razem, użytkownik uruchomi aplikację. Przykładem parametru dynamicznego jest identyfikator sesji. Identyfikator sesji zmienia zwykle co 5 do 30 minut. Web wydajności Rejestrator i odtwarzania aparat testów automatycznie obsługuje najbardziej typowych parametrów dynamicznych:

-   Wartości parametrów dynamicznych, które są ustawiane w wartości pliku cookie. Aparat testów wydajności sieci web obsługuje automatycznie tych podczas odtwarzania.

-   Wartości parametru dynamicznego, które są ustawiane w ukryte pola na stronach HTML, takich jak ASP.NET, wyświetlić stan. Są one automatycznie obsługiwane przez rejestratora, który dodaje ukryte pole reguły wyodrębniania do testu.

-   Wartości parametru dynamicznego, które są ustawione jako ciąg zapytania lub po parametrów. Są one obsługiwane za pośrednictwem parametru dynamicznego wykrywania po zarejestrowaniu testu wydajności sieci web.

Niektóre typy parametry dynamiczne nie są wykrywane. Niewykryte parametru dynamicznego spowoduje, że Twoje testu wydajności sieci web się niepowodzeniem po uruchomieniu, ponieważ wartość dynamiczną będzie się różnił zawsze uruchomienia testu. Aby poprawnie obsłużyć te parametry, można dodać reguły wyodrębniania do parametrów dynamicznych w testach wydajności sieci web ręcznie.

## <a name="create-and-run-a-web-app-with-dynamic-parameters"></a>Tworzenie i uruchamianie aplikacji sieci web z parametrów dynamicznych

Aby zademonstrować wykrywalny i niewykrywalnych parametrów dynamicznych, utworzymy prostą aplikację sieci web ASP.NET, która ma trzy formularzy sieci web z formantami kilka i kodu niestandardowego. Firma Microsoft następnie dowiesz się, jak do izolowania parametrów dynamicznych i sposobu ich obsługi.

1.  Utwórz nowy projekt ASP.NET o nazwie DynamicParamaterSample.

     ![Utwórz pusty projekt aplikacji sieci web ASP.NET](../test/media/web_test_dynamicparameter_aspproject.png "Web_Test_DynamicParameter_ASPProject")

2.  Dodaj formularza sieci web o nazwie Querystring.aspx.

3.  W widoku Projekt przeciągnij pole ukryte na stronę i w, a następnie w Zmień wartość właściwości (ID) na HiddenFieldSessionID.

     ![Dodaj pole ukryte](../test/media/web_test_dynamicparameter_hiddenfield.png "Web_Test_DynamicParameter_HiddenField")

4.  Zmień na widok źródła dla strony Querystring i dodaj następujące wyróżniony kod ASP.NET i JavaScript, służący do generowania parametry dynamiczne identyfikator sesji zasymulować:

    ```html
    <head runat="server">
    <title>JavaScript dynamic property correlation sample</title><script type="text/javascript" language="javascript">    <!--        function jScriptQueryString()         {            var Hidden = document.getElementById("HiddenFieldSessionID");            var sessionId = Hidden.value;            window.location = 'JScriptQuery.aspx?CustomQueryString=jScriptQueryString___' + sessionId;         }    //--></script>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
             <a name="QuerystringHyperlink" href="ASPQuery.aspx?CustomQueryString=ASPQueryString___<%= Session.SessionID %>">Dynamic querystring generated by ASP.net</a>         <br/>         <br/>         <a href="javascript:jScriptQueryString()">Dynamic querystring generated by javascript </a>
        </div>
        <asp:HiddenField ID="HiddenFieldSessionID" runat="server" />
        </form>
    </body>
    </html>
    ```

5.  Otwórz plik Querystring.aspx.cs i Dodaj następujący wyróżniony kod do metody Page_Load:

    ```csharp
    public partial class Querystring : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Session.Add("Key", "Value");HiddenFieldSessionID.Value = Session.SessionID;
        }
    }
    ```

6.  Dodaj drugi formularz sieci web o nazwie ASPQuery.aspx.

7.  W widoku Projekt przeciągnij etykiety na stronie i zmień wartość właściwości (ID) IndexLabel.

     ![Dodawanie etykiet do formularza sieci web](../test/media/web_test_dynamicparameter_label.png "Web_Test_DynamicParameter_Label")

8.  Przeciągnij hiperłącze na stronie i zmień vale właściwości Text Wstecz.

     ![Dodawanie hiperłącza do formularza sieci web](../test/media/web_test_dynamicparameter_hyperlink.png "Web_Test_DynamicParameter_Hyperlink")

9. Wybierz (...) dla właściwości NavigationURL.

     ![Edytuj właściwość NavigateURL](../test/media/web_test_dynamicparameter_hyperlink_navurl.png "Web_Test_DynamicParameter_Hyperlink_NavURL")

     Wybierz Querystring.aspx.

     ![Wybierz adres URL, który można Querystring.aspx](../test/media/web_test_dynamicparameter_hyperlink_navurl2.png "Web_Test_DynamicParameter_Hyperlink_NavURL2")

10. Otwórz plik ASPQuery.aspx.cs i Dodaj następujący wyróżniony kod do metody Page_Load:

    ```csharp
    protected void Page_Load(object sender, EventArgs e)
            {
                int index;            string qstring;            string dateportion;            string sessionidportion;            qstring = Request.QueryString["CustomQueryString"];            index = qstring.IndexOf("___");            dateportion = qstring.Substring(0, index);            index += 3;            sessionidportion = qstring.Substring(index, qstring.Length - index);            if (sessionidportion != Session.SessionID)            {                Response.StatusCode = 401;                IndexLabel.Text = "Failure!  Invalid querystring parameter found.";            }            else            {                IndexLabel.Text = "Success.  Dynamic querystring parameter was found.";            }            IndexLabel.Text += "<br>\r\n";
            }
    ```

11. Dodaj trzeci formularza sieci web o nazwie JScriptQuery.aspx.

     Jak robiliśmy dla drugiej strony, przeciągnij etykietę na formularzu, ustawienie IndexLabel jego właściwości (ID) i przeciągnij hiperłącze na formularzu, ustawienie właściwości text Wstecz i jego właściwość NavigationURL do Querystring.aspx.

     ![Dodawanie i konfigurowanie trzeci formularza sieci web](../test/media/web_test_dynamicparameter_addwebform3.png "Web_Test_DynamicParameter_AddWebForm3")

12. Otwórz plik JScriptQuery.aspx.cs i Dodaj następujący wyróżniony kod do metody Page_Load:

    ```csharp
    protected void Page_Load(object sender, EventArgs e)
            {
                int index;            string qstring;            string dateportion;            string sessionidportion;            qstring = Request.QueryString["CustomQueryString"];            index = qstring.IndexOf("___");            dateportion = qstring.Substring(0, index);            index += 3;            sessionidportion = qstring.Substring(index, qstring.Length - index);            if (sessionidportion != Session.SessionID)            {                Response.StatusCode = 401;                IndexLabel.Text = "Failure!  Invalid querystring parameter found.";            }            else            {                IndexLabel.Text = "Success.  Dynamic querystring parameter was found.";            }            IndexLabel.Text += "<br>\r\n";
            }
    ```

13. Zapisz projekt.

14. W Eksploratorze rozwiązań należy ustawić Querystring.aspx jako strony początkowej.

     ![Ustaw stronę początkową na Querystring.aspx](../test/media/web_test_dynamicparameter_setstartpage.png "Web_Test_DynamicParameter_SetStartPage")

15. Naciśnij klawisze CTRL + F5, aby uruchomić aplikację sieci Web w przeglądarce. Skopiuj adres URL. Będzie on potrzebny podczas rejestrowania testu.

16. Spróbuj łącza. Należy każdego wyświetlają komunikat "Powodzenie. Dynamiczne parametr querystring znaleziono."

     ![Uruchamianie aplikacji sieci web](../test/media/web_test_dynamicparameter_runapp.png "Web_Test_DynamicParameter_RunApp")

     ![Success&#33;](../test/media/web_test_dynamicparameter_runapp2.png "Web_Test_DynamicParameter_RunApp2")

## <a name="create-a-web-performance-test"></a>Tworzenie testu wydajności sieci web

1.  Dodaj wydajności sieci web i projektu testu obciążenia do rozwiązania.

     ![Dodaj projekt testowy perfromance sieci web i obciążenia](../test/media/web_test_dynamicparameter_addtestproject.png "Web_Test_DynamicParameter_AddTestProject")

2.  Zmień nazwę WebTest1.webtest na DynamicParameterSampleApp.webtest.

     ![Zmień nazwę testu wydajności sieci web](../test/media/web_test_dynamicparameter_renametest.png "Web_Test_DynamicParameter_RenameTest")

3.  Rekord testu.

     ![Zarejestruj testu wydajności sieci web](../test/media/web_test_dynamicparameter_recordtest.png "Web_Test_DynamicParameter_RecordTest")

4.  Skopiuj i wklej adres URL witryny sieci web, które w przypadku testowania w przeglądarce.

     ![Wklej adres URL witryny sieci web testowane](../test/media/web_test_dynamicparameter_recordtest2.png "Web_Test_DynamicParameter_RecordTest2")

5.  Przejdź do aplikacji sieci web. Wybierz łącze ASP.NET, łącze Wstecz i łącze javascript, a następnie link wsteczny.

     Rejestrator testu sieci web wyświetla adresów URL żądań i odpowiedzi HTTP podczas przeglądania aplikacji sieci web.

6.  Kliknij przycisk stop na Rejestrator testu.

     Okno dialogowe wykrywania parametry dynamiczne Wyświetla pasek postępu, który zawiera stan wykrywania parametru w odpowiedzi HTTP, które zostały odebrane.

7.  Parametru dynamicznego CustomQueryString, na stronie ASPQuery jest wykrywany automatycznie. Parametru dynamicznego CustomQueryString, na stronie JScriptQuery nie została wykryta.

     Kliknij przycisk OK, aby dodać reguły wyodrębniania do Querystring.aspx powiązania jej do strony ASPQuery.

     ![Podwyższ poziom wykryto parametru dynamicznego](../test/media/web_test_dynamicparameter_promotedialog.png "Web_Test_DynamicParameter_PromoteDialog")

     Reguła wyodrębniania jest dodawany do pierwszego żądania Querystring.aspx.

     ![Reguła wyodrębniania dodane do żądania](../test/media/web_test_dynamicparameter_autoextractionrule.png "Web_Test_DynamicParameter_AutoExtractionRule")

     Rozwiń drugie żądanie w drzewie żądania dla ASPQuery.aspx i zwróć uwagę, że wartość CustomQueryString została powiązana z reguła wyodrębniania.

     ![CustomQueryString powiązana reguła wyodrębniania](../test/media/web_test_dynamicparameter_autoextractionrule2.png "Web_Test_DynamicParameter_AutoExtractionRule2")

8.  Zapisz testu.

## <a name="run-the-test-to-isolate-the-non-detected-dynamic-parameter"></a>Uruchom test, aby odizolować parametru dynamicznego-wykryto

1.  Uruchom test.

     ![Uruchamianie testu wydajności sieci web](../test/media/web_test_dynamicparameter_runtest.png "Web_Test_DynamicParameter_RunTest")

2.  Czwarty żądania na stronie JScriptQuery.aspx kończy się niepowodzeniem. Przejdź do testu sieci web.

     ![Błąd parametru dynamicznego w wynikach testów](../test/media/web_test_dynamicparameter_runresults.png "Web_Test_DynamicParameter_RunResults")

     W węźle żądania JScriptQuery.aspx jest podświetlane w edytorze. Rozwiń węzeł i zwróć uwagę, że część "1v0yhyiyr0raa2w4j4pwf5zl" CustomQueryString wydaje się być dynamiczne.

     ![Podejrzane parametru dynamicznego w CustomQueryString](../test/media/web_test_dynamicparameter_runresults2.png "Web_Test_DynamicParameter_RunResults2")

3.  Wróć do przeglądarki wyników testu wydajności sieci Web i wybierz stronę JScriptQuery.aspx, które zakończyły się niepowodzeniem. Następnie wybierz kartę żądania, sprawdź, czy jest wyczyszczone pole wyboru Pokaż nieprzetworzone dane, przewiń w dół i wybierz szybkiego szukania na CustomQueryString.

     ![Użyj szybkiego znajdowania do izolowania parametru dynamicznego](../test/media/web_test_dynamicparameter_runresultsquckfind.png "Web_Test_DynamicParameter_RunResultsQuckFind")

4.  Wiemy z patrzeć edytora testów, przypisana wartość CustomQueryString żądania JScriptQuery.aspx: `jScriptQueryString___1v0yhyiyr0raa2w4j4pwf5zl`, oraz że podejrzanych części dynamicznej jest "1v0yhyiyr0raa2w4j4pwf5zl". W polu Znajdź co listy rozwijanej pozycję Usuń podejrzane część ciągu wyszukiwania. Ciąg powinien być "CustomQueryString = jScriptQueryString___".

     Parametry dynamiczne są przypisane wartości w jednym z żądania, które poprzedza żądania, które zawiera błąd. W związku z tym wybierz wyszukiwania się pole wyboru i wybierz opcję Znajdź dalej do momentu wyświetlenia poprzedzających żądanie Querystring.aspx wyróżniona w panelu żądania. Powinno to nastąpić, po wybraniu Znajdź następne trzy razy.

     ![Użyj szybkiego wyszukiwania do izolowania parametrów dynamicznych](../test/media/web_test_dynamicparameter_runresultsquckfind4.png)

     Jak pokazano na karcie odpowiedź, a w języku JavaScript, zaimplementowana wcześniej pokazano poniżej, parametr ciągu zapytania CustomQueryString jest przypisywana wartość "jScriptQueryString___" i jest również połączona z wartością zwróconą z var sessionId.

    ```
    function jScriptQueryString()          {             var Hidden = document.getElementById("HiddenFieldSessionID");             var sessionId = Hidden.value;             window.location = 'JScriptQuery.aspx?CustomQueryString=jScriptQueryString___' + sessionId;          }

    ```

     Teraz, aby było wiadomo, gdzie występuje błąd oraz że należy wyodrębnić wartość identyfikatora sesji. Wartość wyodrębniania jest jednak tylko tekst, więc musimy rozwiązać błędu przez próby zlokalizowania ciąg, w którym wyświetlana jest wartość rzeczywista sessionId. Analizując kod widać, że var sessionId równa wartości zwracanych przez HiddenFieldSessionID.

5.  Zastosowanie szybkiego wyszukiwania na HiddenFieldSessionID, czyszcząc wyszukiwania się pole wyboru i wybierając bieżącego żądania.

     ![Use quick find on HiddenFieldSession](../test/media/web_test_dynamicparameter_runresultsquckfindhiddensession.png "Web_Test_DynamicParameter_RunResultsQuckFindHiddenSession")

     Należy zauważyć, że wartość zwracana jest ten sam ciąg jak oryginalny testu wydajności sieci web rejestracji. Dla tego uruchomienia testu wartość zwracana jest "5w4v3yrse4wa4axrafykqksq", a w oryginalnej nagrywania, wartość to "1v0yhyiyr0raa2w4j4pwf5zl". Ponieważ wartość jest niezgodna z oryginalnego nagrywania, generowany jest błąd.

6.  Ponieważ mamy naprawa parametru dynamicznego w oryginalnej rejestrowanie, należy wybrać wynik zarejestrowane na pasku narzędzi.

     ![Wybierz zarejestrowane wynik](../test/media/web_test_dynamicparameter_recordedresult.png "Web_Test_DynamicParameter_RecordedResult")

7.  W wynikach zarejestrowane Wybierz trzeci żądania, czyli na tym samym żądanie Querystringrequest.aspx samodzielnie w wyniki uruchomienia testu.

     ![Wybierz tej samej żądania w wynikach zarejestrowane](../test/media/web_test_dynamicparameter_recordedresultsselectnode.png "Web_Test_DynamicParameter_RecordedResultsSelectNode")

     Wybierz kartę odpowiedzi, przewiń w dół i wybierz wartość parametru dynamicznego oryginalną "1v0yhyiyr0raa2w4j4pwf5zl", która zostanie odizolowana wcześniej oraz dodawanie reguły wyodrębniania.

     ![Dodawanie reguły wyodrębniania dla parametru dynamicznego](../test/media/web_test_dynamicparameter_recordedresultaddextractionrule.png "Web_Test_DynamicParameter_RecordedResultAddExtractionRule")

     Nowa reguła wyodrębniania jest dodawany do żądania Querystring.aspx i jest przypisywana wartość "Param0".

     Jeśli okno dialogowe informuje NAS znaleziono dopasowań dla wyodrębnionego tekstu powiązać parametr, kliknij przycisk Tak.

     ![Utworzona reguła wyodrębniania](../test/media/web_test_dynamicparameter_addextractiondialog.png "Web_Test_DynamicParameter_AddExtractionDialog")

8.  Następnie wybierz polecenie Znajdź. Pierwsze dopasowanie jest ten, który należy zmienić, który jest parametr CustomQueryString w JScriptQuery strony.

     ![Znajdź i Zamień tekst dla parametru](../test/media/web_test_dynamicparameter_addextractionfindreplace.png "Web_Test_DynamicParameter_AddExtractionFindReplace")

9. Wybierz opcję Zastąp.

     ![Zamień tekst z parametrem](../test/media/web_test_dynamicparameter_addextractionfindreplace2.png "Web_Test_DynamicParameter_AddExtractionFindReplace2")

     Parametr QueryString obszarze żądanie JScriptQuery.aspx jest aktualizowane za pomocą nowego parametru kontekstu: CustomQueryString = jScriptQueryString___ {{Param0}}.

     ![Parametr dotyczą querystring](../test/media/web_test_dynamicparameter_addextractionfindreplace3.png "Web_Test_DynamicParameter_AddExtractionFindReplace3")

10. Zamknij Znajdź i Zamień w oknie dialogowym. Zwróć uwagę, podobne struktury drzewa żądania między wykryto parametru dynamicznego, a nie wykryto parametr dynamiczny, który zostanie skorelowane.

     ![Wykryto i skorelowanych parametrów dynamicznych](../test/media/web_test_dynamicparameter_conclusion.png "Web_Test_DynamicParameter_Conclusion")

11. Uruchom test. Obecnie działa bez błędu.

## <a name="qa"></a>FUNKCJA PYTANIA I ODPOWIEDZI

### <a name="q-can-i-re-run-dynamic-parameter-detection-if-my-web-app-gets-modified"></a>Pytanie: czy można ponownie uruchomić parametru dynamicznego wykrywania w przypadku modyfikacji pobiera Moja aplikacja sieci web?

 **Odpowiedź:** tak, użyj następującej procedury:

1.  Na pasku narzędzi wybierz Dodawanie parametrów dynamicznych do parametrów testów sieci Web przycisku.

     Po zakończeniu procesu wykrywania, jeśli wykryto żadnych parametrów dynamicznych, Dodawanie parametrów dynamicznych do sieci web testów parametry, które zostanie wyświetlone okno dialogowe.

     Parametry dynamiczne są wyświetlane w kolumnie parametrów dynamicznych. Żądania parametru dynamicznego wyodrębnione ze i powiązane z należą parametru wyodrębnienie z odpowiedzi i powiązania do żądania kolumn.

     Jeśli wybierzesz parametru dynamicznego Dodawanie parametrów dynamicznych do okno dialogowe Parametry testu sieci web, zostanie podświetlony dwa żądania w drzewie żądania edytora testów wydajności sieci Web. Pierwsze żądanie będzie żądania, które reguła wyodrębniania nie zostanie dodany do. Drugie żądanie jest, gdzie będzie można powiązać wyodr. wartością.

2.  Wybierz lub wyczyść pole wyboru obok parametrów dynamicznych, który ma zostać automatycznie skorelowania. Domyślnie są zaznaczone wszystkie parametry dynamiczne.

### <a name="q-do-i-need-to-configure-visual-studio-to-detect-dynamic-parameters"></a>Pytanie: należy skonfigurować Visual Studio, aby wykryć parametry dynamiczne?

 **Odpowiedź:** domyślnej konfiguracji programu Visual Studio jest wykrycie parametrów dynamicznych podczas rejestrowania testu wydajności sieci web. Jednak jeśli masz skonfigurowane opcje programu Visual Studio nie, aby wykryć dynamiczne parametry, lub aplikacji sieci web testowane pobiera modyfikowane za pomocą dodatkowych parametrów dynamicznych; nadal możesz [Uruchom parametru dynamicznego wykrywania w edytorze testów wydajności sieci Web](#FindingNonDetectableDynamicParamters_QA_ReRunDetection).