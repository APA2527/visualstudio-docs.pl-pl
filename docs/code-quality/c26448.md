---
title: C26448
ms.date: 03/22/2018
ms.prod: visual-studio-dev15
ms.topic: reference
f1_keywords:
- C26448
helpviewer_keywords:
- C26448
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- multiple
ms.openlocfilehash: 24bdd6dd90f5f4f3364b1ef972d1d092a7f5568b
ms.sourcegitcommit: 37fb7075b0a65d2add3b137a5230767aa3266c74
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/02/2019
ms.locfileid: "53845632"
---
# <a name="c26448-usegslfinally"></a>C26448 USE_GSL_FINALLY

Należy rozważyć użycie `gsl::finally` gdy ostateczna akcja jest przeznaczony.

C++ podstawowych wytycznych dotyczących języka: [GSL.util: Narzędzia](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#SS-utilities)

Guidelines Support Library oferuje wygodne narzędzie do zaimplementowania *ostateczna Akcja* koncepcji. Ponieważ język C++ nie obsługuje **try-finally** konstrukcji, stało się wspólne dla implementacji typów niestandardowych oczyszczania, które powodowałoby wywołanie pliku wykonywalnego dowolne akcje w chwili zniszczenia. `gsl::finally` Narzędzie jest zaimplementowana w ten sposób i zapewnia bardziej jednolite sposób końcowego akcje w bazie kodu.

Dostępne są także przypadki, w którym końcowego akcje są wykonywane w stara sposób stylu C za pomocą **goto** instrukcji (zazwyczaj jest zalecane przez [C26438 NO_GOTO](c26438.md)). Jest trudny do wykrycia zamiar dokładnie w kodzie, która intensywnie korzysta z **goto**, ale niektóre heurystyki pomaga znaleźć lepsze kandydatów do oczyszczania.

## <a name="remarks"></a>Uwagi

- Ta reguła jest bardzo uproszczone i używa nazw etykiet w celu odgadnięcia o możliwości, aby użyć obiektów ostateczna Akcja.
- Nazw etykiet, które można podnieść ostrzeżenie zawiera wyrazy, takie jak "koniec", "final", "czyszczenie", i tak dalej.
- Ostrzeżenie pojawia się na **goto** instrukcji. Pełne dane wyjściowe mogą pojawiać się w niektórych sytuacjach, ale może to pomóc w priorytetyzowanie kodu, w zależności od jego złożoności.
- Ta zasada znajduje się zawsze w parę z [C26438 NO_GOTO](c26438.md). W zależności od priorytetów można wyłączyć jeden z nich.

## <a name="example-cleanup-with-multiple-goto-statements"></a>Przykład: Oczyszczanie przy użyciu wielu instrukcji goto

```cpp
void poll(connection_info info)
{
    connection c = {};
    if (!c.open(info))
        return;

    while (c.wait())
    {
        connection::header h{};
        connection::signature s{};
        if (!c.read_header(h))
            goto end;               // C26448 and C26438
        if (!c.read_signature(s))
            goto end;               // C26448 and C26438
        // ...
    }

end:
    c.close();
}
```

## <a name="example-cleanup-with-multiple-goto-statements-replaced-by-gslfinally"></a>Przykład: Oczyszczanie przy użyciu wielu instrukcji goto zastępuje elementu gsl::finally

```cpp
void poll(connection_info info)
{
    connection c = {};
    if (!c.open(info))
        return;

    auto end = gsl::finally([&c] { c.close(); });
    while (c.wait())
    {
        connection::header h{};
        connection::signature s{};
        if (!c.read_header(h))
            return;
        if (!c.read_signature(s))
            return;
        // ...
    }
}
```
