---
title: 'CA1305: Określ IFormatProvider'
ms.date: 06/30/2018
ms.topic: reference
f1_keywords:
- SpecifyIFormatProvider
- CA1305
helpviewer_keywords:
- CA1305
- SpecifyIFormatProvider
ms.assetid: fb34ed9a-4eab-47cc-8eef-3068a4a1397e
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
ms.workload:
- multiple
ms.openlocfilehash: a2ea6ab9364e2e183b782f4d3084cd2b5eb6dd45
ms.sourcegitcommit: ade07bd1cf69b8b494d171ae648cfdd54f7800d3
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/21/2020
ms.locfileid: "81649152"
---
# <a name="ca1305-specify-iformatprovider"></a>CA1305: Określ IFormatProvider

|||
|-|-|
|TypeName|SpecifyIFormatProvider|
|CheckId|CA1305|
|Kategoria|Globalizacja firmy Microsoft.Globalizacja|
|Przełomowa zmiana|Nierozrywając się|

## <a name="cause"></a>Przyczyna

Metoda lub konstruktor wywołuje jeden lub więcej elementów <xref:System.IFormatProvider?displayProperty=fullName> członkowskich, które mają przeciążenia, które akceptują <xref:System.IFormatProvider> parametr, a metoda lub konstruktor nie wywołuje przeciążenia, które przyjmuje parametr.

Ta reguła ignoruje wywołania metod platformy .NET, które są udokumentowane jako ignorowanie parametru. <xref:System.IFormatProvider> Reguła ignoruje również następujące metody:

- <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetObject%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetString%2A?displayProperty=nameWithType>
- <xref:System.Boolean.ToString%2A?displayProperty=nameWithType>
- <xref:System.Char.ToString%2A?displayProperty=nameWithType>
- <xref:System.Guid.ToString%2A?displayProperty=nameWithType>

## <a name="rule-description"></a>Opis reguły

Jeśli <xref:System.Globalization.CultureInfo?displayProperty=nameWithType> obiekt <xref:System.IFormatProvider> lub obiekt nie jest podany, wartość domyślna, która jest dostarczana przez przeciążony element członkowski może nie mieć efektu, który ma być we wszystkich ustawieniach regionalnych. Ponadto członkowie platformy .NET wybrać domyślną kulturę i formatowanie na podstawie założeń, które mogą nie być poprawne dla kodu. Aby upewnić się, że kod działa zgodnie z oczekiwaniami dla scenariuszy, należy podać informacje specyficzne dla kultury zgodnie z następującymi wytycznymi:

- Jeśli wartość zostanie wyświetlona użytkownikowi, użyj bieżącej kultury. Zobacz: <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>.

- Jeśli wartość będzie przechowywana i uzyskiwać dostęp przez oprogramowanie (utrwalone do pliku lub bazy danych), należy użyć kultury niezmiennej. Zobacz: <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.

- Jeśli nie znasz miejsca docelowego wartości, niech konsument danych lub dostawca określić kulturę.

Nawet jeśli domyślne zachowanie przeciążonego elementu członkowskiego jest odpowiednie dla Twoich potrzeb, lepiej jawnie wywołać przeciążenie specyficzne dla kultury, aby kod był samodokumiający się i łatwiej obsługiwany.

## <a name="how-to-fix-violations"></a>Jak naprawić naruszenia

Aby naprawić naruszenie tej reguły, należy użyć <xref:System.IFormatProvider> przeciążenia, które przyjmuje argument. Lub użyj [C# interpolowany ciąg](/dotnet/csharp/tutorials/string-interpolation) i <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> przekazać go do metody.

## <a name="when-to-suppress-warnings"></a>Kiedy należy pomijać ostrzeżenia

Można bezpiecznie pominąć ostrzeżenie od tej reguły, gdy jest pewne, że domyślny format jest prawidłowym wyborem i gdzie łatwość konserwacji kodu nie jest ważnym priorytetem rozwoju.

## <a name="example"></a>Przykład

W poniższym kodzie ciąg narusza regułę `example1` CA1305. Ciąg `example2` spełnia regułę CA1305, przechodząc <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>, który <xref:System.IFormatProvider>implementuje , do <xref:System.String.Format(System.IFormatProvider,System.String,System.Object)?displayProperty=nameWithType>. Ciąg `example3` spełnia regułę CA1305, przekazując interpolowany <xref:System.FormattableString.Invariant%2A?displayProperty=fullName]>ciąg do .

```csharp
string name = "Georgette";

// Violates CA1305
string example1 = String.Format("Hello {0}", name);

// Satisfies CA1305
string example2 = String.Format(CultureInfo.CurrentCulture, "Hello {0}", name);

// Satisfies CA1305
string example3 = FormattableString.Invariant($"Hello {name}");
```

## <a name="related-rules"></a>Powiązane reguły

- [CA1304: Określ CultureInfo](../code-quality/ca1304.md)

## <a name="see-also"></a>Zobacz też

- [Korzystanie z CultureInfo Klasy](/dotnet/standard/globalization-localization/globalization#work-with-culture-specific-settings)
