---
title: 'CA1304: Określ CultureInfo'
ms.date: 06/30/2018
ms.topic: reference
f1_keywords:
- SpecifyCultureInfo
- CA1304
helpviewer_keywords:
- SpecifyCultureInfo
- CA1304
ms.assetid: b912d76a-54fd-4c93-b25d-16491e0ae319
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 668555c6247b45fea9e472ab5347d692243c1d9f
ms.sourcegitcommit: ade07bd1cf69b8b494d171ae648cfdd54f7800d3
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/21/2020
ms.locfileid: "81649139"
---
# <a name="ca1304-specify-cultureinfo"></a>CA1304: Określ CultureInfo

|||
|-|-|
|TypeName|SpecifyCultureInfo|
|CheckId|CA1304|
|Kategoria|Globalizacja firmy Microsoft.Globalizacja|
|Przełomowa zmiana|Nierozrywając się|

## <a name="cause"></a>Przyczyna

Metoda lub konstruktor wywołuje element członkowski, który <xref:System.Globalization.CultureInfo?displayProperty=nameWithType> ma przeciążenie, który akceptuje parametr, a <xref:System.Globalization.CultureInfo> metoda lub konstruktor nie wywołuje przeciążenia, które przyjmuje parametr. Ta reguła ignoruje wywołania następujących metod:

- <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetObject%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetString%2A?displayProperty=nameWithType>

Można również skonfigurować więcej symboli, które mają zostać [wykluczone](#configurability) przez tę regułę.

## <a name="rule-description"></a>Opis reguły

Jeśli <xref:System.Globalization.CultureInfo> obiekt <xref:System.IFormatProvider?displayProperty=nameWithType> lub obiekt nie jest podany, wartość domyślna, która jest dostarczana przez przeciążony element członkowski może nie mieć efektu, który ma być we wszystkich ustawieniach regionalnych. Ponadto członkowie platformy .NET wybrać domyślną kulturę i formatowanie na podstawie założeń, które mogą nie być poprawne dla kodu. Aby upewnić się, że kod działa zgodnie z oczekiwaniami dla scenariuszy, należy podać informacje specyficzne dla kultury zgodnie z następującymi wytycznymi:

- Jeśli wartość zostanie wyświetlona użytkownikowi, użyj bieżącej kultury. Zobacz: <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>.

- Jeśli wartość będzie przechowywana i uzyskiwać dostęp przez oprogramowanie, to znaczy, utrwalone do pliku lub bazy danych, użyj kultury niezmienne. Zobacz: <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.

- Jeśli nie znasz miejsca docelowego wartości, niech konsument danych lub dostawca określić kulturę.

Nawet jeśli domyślne zachowanie przeciążonego elementu członkowskiego jest odpowiednie dla Twoich potrzeb, lepiej jawnie wywołać przeciążenie specyficzne dla kultury, aby kod był samodokumiający się i łatwiej obsługiwany.

> [!NOTE]
> <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>jest używany tylko do pobierania zlokalizowanych zasobów <xref:System.Resources.ResourceManager?displayProperty=nameWithType> przy użyciu wystąpienia klasy.

## <a name="how-to-fix-violations"></a>Jak naprawić naruszenia

Aby naprawić naruszenie tej reguły, należy użyć <xref:System.Globalization.CultureInfo> przeciążenia, które przyjmuje argument.

## <a name="when-to-suppress-warnings"></a>Kiedy należy pomijać ostrzeżenia

Jest bezpieczne, aby pominąć ostrzeżenie od tej reguły, gdy jest pewne, że domyślna kultura jest prawidłowym wyborem i gdzie łatwość konserwacji kodu nie jest ważnym priorytetem rozwoju.

## <a name="configurability"></a>Konfiguracji

Jeśli uruchamiasz tę regułę z [analizatorów FxCop](install-fxcop-analyzers.md) (a nie z starszą analizą), możesz skonfigurować analizę dla tej reguły.

### <a name="excluded-symbol-names"></a>Wykluczone nazwy symboli

Można skonfigurować, które części bazy kodu, aby wykluczyć z analizy. Na przykład, aby określić, że reguła nie `MyType`powinna być uruchamiana na żadnym kodzie w ramach typów o nazwie, dodaj następującą parę klucz-wartość do pliku .editorconfig w projekcie:

```ini
dotnet_code_quality.CA1304.excluded_symbol_names = MyType
```

Dozwolone formaty nazw symboli w wartości opcji (oddzielone '|'):

- Tylko nazwa symbolu (zawiera wszystkie symbole z nazwą, niezależnie od typu zawierającego lub obszaru nazw)
- W pełni kwalifikowane nazwy w [formacie identyfikatora dokumentacji](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format)symbolu . Każda nazwa symbolu wymaga prefiksu rodzaju symbolu, takiego jak prefiks "M:" dla metod, prefiks "T:" dla typów, prefiks "N:" dla obszarów nazw itp.
- `.ctor`dla konstruktorów i `.cctor` konstruktorów statycznych

Przykłady:

| Wartość opcji | Podsumowanie |
| --- | --- |
|`dotnet_code_quality.CA1304.excluded_symbol_names = MyType` | Dopasowuje wszystkie symbole o nazwie "MyType" w kompilacji
|`dotnet_code_quality.CA1304.excluded_symbol_names = MyType1|MyType2` | Dopasowuje wszystkie symbole o nazwie "MyType1" lub "MyType2" w kompilacji
|`dotnet_code_quality.CA1304.excluded_symbol_names = M:NS.MyType.MyMethod(ParamType)` | Pasuje do określonej metody "MyMethod" z danym w pełni kwalifikowanym podpisem
|`dotnet_code_quality.CA1304.excluded_symbol_names = M:NS1.MyType1.MyMethod1(ParamType)|M:NS2.MyType2.MyMethod2(ParamType)` | Dopasowuje określone metody "MyMethod1" i "MyMethod2" z odpowiednim podpisem w pełni kwalifikowanym

Można skonfigurować wszystkie te opcje tylko dla tej reguły, dla wszystkich reguł lub dla wszystkich reguł w tej kategorii (Zabezpieczenia). Aby uzyskać więcej informacji, zobacz [Konfigurowanie analizatorów FxCop](configure-fxcop-analyzers.md).

## <a name="example-showing-how-to-fix-violations"></a>Przykład pokazujący, jak naprawić naruszenia

W poniższym `BadMethod` przykładzie powoduje dwa naruszenia tej reguły. `GoodMethod`koryguje pierwsze naruszenie, przekazując niezmienną <xref:System.String.Compare%2A?displayProperty=nameWithType>kulturę do , i koryguje <xref:System.String.ToLower%2A?displayProperty=nameWithType> drugie `string3` naruszenie, przekazując bieżącą kulturę, ponieważ jest wyświetlana użytkownikowi.

[!code-csharp[FxCop.Globalization.CultureInfo#1](../code-quality/codesnippet/CSharp/ca1304-specify-cultureinfo_1.cs)]

## <a name="example-showing-formatted-output"></a>Przykład przedstawiający sformatowane dane wyjściowe

Poniższy przykład pokazuje wpływ bieżącej <xref:System.IFormatProvider> kultury na wartość <xref:System.DateTime> domyślną, która jest wybrana przez typ.

[!code-csharp[FxCop.Globalization.IFormatProvider#1](../code-quality/codesnippet/CSharp/ca1304-specify-cultureinfo_2.cs)]

Ten przykład generuje następujące wyniki:

```txt
6/4/1900 12:15:12 PM
06/04/1900 12:15:12
```

## <a name="related-rules"></a>Powiązane reguły

- [CA1305: Określ IFormatProvider](../code-quality/ca1305.md)

## <a name="see-also"></a>Zobacz też

- [Korzystanie z CultureInfo Klasy](/dotnet/standard/globalization-localization/globalization#work-with-culture-specific-settings)
