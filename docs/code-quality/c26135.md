---
title: C26135
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C26135
helpviewer_keywords:
- C26135
ms.assetid: e9515189-8d21-473b-89f4-8b92ebd3a4f1
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 78af9fdc0b332b6494b25fa5391b8e05f1e8942b
ms.sourcegitcommit: 485ffaedb1ade71490f11cf05962add1718945cc
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/16/2019
ms.locfileid: "72448563"
---
# <a name="c26135"></a>C26135
Ostrzeżenie C26135: brak adnotacji \<annotation > w funkcji @no__t 1func >.

 Ostrzeżenie C26135 jest wystawiany, gdy analizator wnioskuje, że funkcja jest funkcją otoki blokady, która ma efekt zablokowania lub zablokowania zwolnienia. Jeśli kod nie jest przeznaczony do funkcji otoki, to blokada jest wyciekiem (Jeśli blokada jest pobierana) lub jest wydawana nieprawidłowo (Jeśli blokada jest wydawana).

## <a name="example"></a>Przykład
 Poniższy przykład generuje ostrzeżenie C26135, ponieważ brakuje odpowiedniej adnotacji efektów ubocznych.

```

typedef struct _DATA
{
    CRITICAL_SECTION cs;
} DATA;

void MyEnter(DATA* p)
{
    // Warning C26135:
    // Missing side effect annotation _Acquires_lock_(&p->cs)
    EnterCriticalSection(&p->cs);
}

void MyLeave(DATA* p)
{
    // warning C26135:
    // Missing side effect annotation _Releases_lock_(&p->cs)
    LeaveCriticalSection(&p->cs);
}
```

## <a name="example"></a>Przykład
 Ostrzeżenie C26135 jest również wydawane, gdy zostanie wykryty warunkowy efekt blokowania. Aby dodać adnotację do efektu warunkowego, należy użyć adnotacji `_When_(ConditionExpr, LockAnnotation)`, gdzie `LockAnnotation` jest `_Acquires_lock_` lub `_Releases_lock_`, a wyrażenie predykatu `ConditionExpr` jest wyrażeniem warunkowym typu Boolean. Skutki uboczne innych adnotacji w tej samej funkcji występuje tylko wtedy, gdy `ConditionExpr` daje w wyniku wartość true. Ponieważ `ConditionExpr` służy do przekazywania warunku z powrotem do obiektu wywołującego, musi on zawierać zmienne, które są rozpoznawane w kontekście wywołującym. Obejmują one parametry funkcji, globalne lub zmienne składowe klasy lub wartość zwracaną. Aby wyświetlić wartość zwracaną, użyj słowa kluczowego Special w adnotacji `return`, jak pokazano w poniższym przykładzie.

```

 typedef struct _DATA
 {
     CRITICAL_SECTION cs;
     int state;
} DATA;

 _When_(return != 0, _Acquires_lock_(p->cs))
 int TryEnter(DATA* p)
 {
     if (p->state != 0)
     {
         EnterCriticalSection(&p->cs);
         return p->state;
     }

     return 0;
 }
```

 W przypadku blokad udostępnionych/wyłącznych, znanych również jako blokady czytnika/składnika zapisywania, można wyznaczać blokowanie efektów ubocznych, korzystając z następujących adnotacji:

- `_Acquires_shared_lock_(LockExpr)`

- `_Releases_shared_lock_(LockExpr)`

- `_Acquires_exclusive_lock_(LockExpr)`

- `_Releases_exclusive_lock_(LockExpr)`
