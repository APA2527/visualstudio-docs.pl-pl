---
title: C6262
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6262
helpviewer_keywords:
- C6262
ms.assetid: 3eddc74e-2b05-4159-a093-fd469fdcebbb
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- multiple
ms.openlocfilehash: d089c85bc4e1faf6c79bbf5fd86b5403c908791c
ms.sourcegitcommit: 39a04f42d23597b70053686d7e927ba78f38a9a8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/05/2019
ms.locfileid: "71974637"
---
# <a name="c6262"></a>C6262

Ostrzeżenie C6262: Funkcja używa \<constant > bajtów stosu: przekracza/analyze: STACKSIZE @ no__t-1constant 2 >. Rozważ przeniesienie niektórych danych do sterty

To ostrzeżenie wskazuje, że w funkcji wykryto użycie stosu, które przekracza wstępnie ustawiony próg (`constant 2`). Domyślny rozmiar ramki stosu dla tego ostrzeżenia to 16 KB dla trybu użytkownika, 1 KB dla trybu jądra. Stos, nawet w trybie użytkownika, jest ograniczony i nie można zatwierdzić strony stosu powoduje wyjątek przepełnienia stosu. Tryb jądra ma limit rozmiaru stosu 12 KB, którego nie można zwiększyć. w związku z tym kod trybu jądra powinien agresywnie ograniczać użycie stosu.

Aby rozwiązać problem związany z tym ostrzeżeniem, można przenieść niektóre dane do sterty lub do innej pamięci dynamicznej.  W trybie użytkownika jedna duża Ramka stosu może nie być problemem — to ostrzeżenie może być pominięte, ale duża Ramka stosu zwiększa ryzyko przepełnienia stosu. (Duża Ramka stosu może wystąpić, jeśli funkcja używa stosu silnie lub jest cykliczna). Łączny rozmiar stosu w trybie użytkownika można zwiększyć, jeśli występuje przepełnienie stosu, ale tylko do limitu systemu.  Można użyć **/analyze** opcji wiersza polecenia, aby zmienić wartość `<constant 2>`, ale zwiększenie jej stanowi zagrożenie, że błąd nie zostanie zgłoszony.

W przypadku kodu trybu jądra — na przykład w projektach sterowników — wartość `<constant 2>` jest ustawiona na 1 KB. Dobrze napisywane sterowniki powinny mieć bardzo kilka funkcji, które zbliżają się do tej wartości, a zmiana limitu w dół może być pożądana.  Te same ogólne techniki, które są używane dla kodu trybu użytkownika w celu zmniejszenia rozmiaru stosu, można dostosować do kodu trybu jądra.

## <a name="example"></a>Przykład

Poniższy kod generuje to ostrzeżenie, ponieważ `char buffer` przypisuje 16 382 bajtów, a lokalna zmienna Integer `i` przypisuje kolejne 4 bajty, które razem przekraczają domyślny limit rozmiaru stosu wynoszący 16 KB.

```cpp
// cl.exe /c /analyze /EHsc /W4
#include <windows.h>
#define MAX_SIZE 16382

void f( )
{
    int i;
    char buffer[MAX_SIZE];

    i = 0;
    buffer[0]='\0';

    // code...
}
```

Poniższy kod koryguje to ostrzeżenie, przenosząc niektóre dane do sterty.

```cpp
// cl.exe /c /analyze /EHsc /W4
#include <stdlib.h>
#include <malloc.h>
#define MAX_SIZE 16382

void f( )
{
    int i;
    char *buffer;

    i = 0;
    buffer = (char *) malloc( MAX_SIZE );
    if (buffer != NULL)
    {
        buffer[0] = '\0';
        // code...
        free(buffer);
    }
}
```

Użycie funkcji malloc i Free ma wiele pułapek w sensie przecieków pamięci i wyjątków. Aby w ogóle uniknąć tego rodzaju przecieków i problemów z wyjątkami, użyj mechanizmów, które są dostarczane przez C++ standardową bibliotekę szablonów (STL). Należą do nich [shared_ptr](/cpp/standard-library/shared-ptr-class), [unique_ptr](/cpp/standard-library/unique-ptr-class)i [Vector](/cpp/standard-library/vector). Aby uzyskać więcej informacji, zobacz [inteligentne wskaźniki](/cpp/cpp/smart-pointers-modern-cpp) i [ C++ standardowa biblioteka](/cpp/standard-library/cpp-standard-library-reference).

**Aby poprawić to ostrzeżenie przez dostosowanie rozmiaru stosu**

1. Na pasku menu wybierz kolejno opcje **projekt** > **Właściwości**.

     Zostanie wyświetlone okno dialogowe **strony właściwości** .

2. Rozwiń węzeł **Właściwości konfiguracji**.

3. Rozwiń węzeł **CC++/** .

4. Wybierz właściwości **wiersza polecenia** .

5. W obszarze **Opcje dodatkowe**Dodaj **/analyze: stacksize16388**.

## <a name="see-also"></a>Zobacz także

- [/STACK (Twórz stos z alokacji)](/cpp/build/reference/stack-stack-allocations)
- [_resetstkoflw](/cpp/c-runtime-library/reference/resetstkoflw)
- [Instrukcje: Korzystanie z natywnego sprawdzania w trakcie wykonywania](../debugger/how-to-use-native-run-time-checks.md)