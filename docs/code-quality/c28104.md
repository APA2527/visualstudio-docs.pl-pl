---
title: C28104
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C28104
helpviewer_keywords:
- C28104
ms.assetid: 0dda7e70-7c63-4b6b-a3fc-adad0815f7f4
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 5e6e08e86b9786a92a960eb745e0f151f040b4e7
ms.sourcegitcommit: 174c992ecdc868ecbf7d3cee654bbc2855aeb67d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/06/2019
ms.locfileid: "74879090"
---
# <a name="c28104"></a>C28104
ostrzeżenie C28104: Zasób, który powinien zostać pozyskany przed zakończeniem funkcji, nie został pozyskany

 Funkcja, która jest przeznaczona do uzyskania zasobu przed jego opuszczeniem, zostanie zakończona bez nabycia zasobu. To ostrzeżenie wskazuje, że funkcja jest oznaczona adnotacją `__drv_acquiresResource` ale nie zwraca rzeczywistego nabycia zasobu. Jeśli ta funkcja jest funkcją otoki, ścieżka przez funkcję nie osiągnęła opakowanej funkcji. Jeśli nie można uzyskać dostępu do opakowanej funkcji, ponieważ funkcja zwróciła błąd i faktycznie nie uzyskała zasobu, może być konieczne użycie adnotacji warunkowej (`__drv_when`).

 Jeśli ta funkcja rzeczywiście implementuje pozyskiwanie zasobu, może nie być możliwe, aby PFD wykryje, że zasób został pobrany. W takim przypadku należy użyć ostrzeżenia `#pragma`, aby pominąć błąd. Można prawdopodobnie umieścić `#pragma` w wierszu poprzedzającym `{`, który rozpoczyna treść funkcji. Funkcje wywołujące nadal wymagają adnotacji, ale Narzędzie analizy kodu nie będzie w stanie wykryć, czy zasób został pobrany.

## <a name="example"></a>Przykład

```cpp
__drv_acquireResourceGlobal(HWLock, lockid)
void GetHardwareLock(lockid)
#pragma warning (suppress: 28104)
{
   // code to implement a hardware lock (which the Code Analysis tool can't recognize)
}
```
