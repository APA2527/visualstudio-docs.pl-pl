---
title: C28104
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C28104
helpviewer_keywords:
- C28104
ms.assetid: 0dda7e70-7c63-4b6b-a3fc-adad0815f7f4
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 12566c26c9716bdf8cc400bb03198d43bc9678ab
ms.sourcegitcommit: 485ffaedb1ade71490f11cf05962add1718945cc
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/16/2019
ms.locfileid: "72448422"
---
# <a name="c28104"></a>C28104
Ostrzeżenie C28104: zasób, który powinien zostać pozyskany przed zakończeniem funkcji, nie został uzyskany

 Funkcja, która jest przeznaczona do uzyskania zasobu przed jego opuszczeniem, zostanie zakończona bez nabycia zasobu. To ostrzeżenie wskazuje, że funkcja jest oznaczona adnotacją `__drv_acquiresResource`, ale nie zwraca rzeczywistego nabycia zasobu. Jeśli ta funkcja jest funkcją otoki, ścieżka przez funkcję nie osiągnęła opakowanej funkcji. Jeśli nie można uzyskać dostępu do opakowanej funkcji, ponieważ funkcja zwróciła błąd i faktycznie nie uzyskała zasobu, może być konieczne użycie adnotacji warunkowej (`__drv_when`).

 Jeśli ta funkcja rzeczywiście implementuje pozyskiwanie zasobu, może nie być możliwe, aby PFD wykryje, że zasób został pobrany. W takim przypadku należy użyć ostrzeżenia `#pragma`, aby pominąć błąd. Można prawdopodobnie umieścić `#pragma` w wierszu poprzedzającym `{`, który rozpoczyna treść funkcji. Funkcje wywołujące nadal wymagają adnotacji, ale Narzędzie analizy kodu nie będzie w stanie wykryć, czy zasób został pobrany.

## <a name="example"></a>Przykład

```
__drv_acquireResourceGlobal(HWLock, lockid)
void GetHardwareLock(lockid)
#pragma warning (suppress: 28104)
{
   // code to implement a hardware lock (which the Code Analysis tool can't recognize)
}
```
