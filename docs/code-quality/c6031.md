---
title: C6031
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6031
helpviewer_keywords:
- C6031
ms.assetid: 59e1ef0a-b3ca-4ffa-bcb3-ad2bd22ece22
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- multiple
ms.openlocfilehash: 04649a0343a4e013791b4096ea9ab4ca51698a27
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "62782599"
---
# <a name="c6031"></a>C6031
Ostrzeżenie C6031: ignorowana wartość zwrotna: \<funkcja > mogła zwrócić nieoczekiwaną wartość

 To ostrzeżenie wskazuje, że funkcja wywołująca nie sprawdza wartość zwracaną przez wywołanie funkcji, które sygnalizuje błąd przez wartość zwracaną. W zależności od tego, która funkcja jest wywoływana ta wada może prowadzić do misbehavior pozornie losowe programu, w tym uszkodzenia danych i awarie w warunkach błędu lub sytuacji zasobów.

 Ogólnie rzecz biorąc nie jest bezpiecznie przyjąć założenie, że wywołanie funkcji wymagających dysku, sieci, pamięci lub inne zasoby zawsze powiedzie się. Obiekt wywołujący należy zawsze sprawdzać zwracaną wartość i odpowiednio obsługiwać przypadki błędów. Ponadto należy wziąć pod uwagę przy użyciu `_Must_inspect_result_` adnotacji, która sprawdza, czy wartość jest badany w wygodny sposób.

## <a name="example"></a>Przykład
 Poniższy kod generuje to ostrzeżenie:

```cpp
#include <stdio.h>
void f( )
{
  fopen( "test.c", "r" ); // return value ignored
  // code ...
}
```

 Aby poprawić to ostrzeżenie, sprawdź wartość zwracaną funkcji, jak pokazano w poniższym kodzie:

```cpp
#include <stdio.h>
void f( )
{
  FILE *stream;
  if((stream = fopen( "test.c", "r" )) == NULL )
    return;
  // code ...
}
```

 W poniższym kodzie użyto funkcja bezpiecznego `fopen_s` aby poprawić to ostrzeżenie:

```cpp
#include <stdio.h>
void f( )
{
  FILE *stream;
  errno_t err;

  if( (err  = fopen_s( &stream, "test.c", "r" )) !=0 )
  {
    // code ...
  }
}
```

 To ostrzeżenie zostanie również wygenerowany, jeśli obiekt wywołujący ignoruje wartość zwracaną przez funkcję oznaczony za pomocą `_Check_return_` właściwości, jak pokazano w poniższym kodzie.

```cpp

#include <sal.h>
_Check_return_ bool func();

void test_f()
{
    func(); //  Warning C6031
}
```

 Aby rozwiązać problem z poprzednim ostrzeżeniem, należy sprawdzić wartość zwrotną, jak pokazano w poniższym kodzie:

```cpp

#include <sal.h>
_Check_return_ bool func();

void test_f()
{
    if( func() ) {
        // code ...
    }
}
```

## <a name="see-also"></a>Zobacz też

- [fopen_s, _wfopen_s](/cpp/c-runtime-library/reference/fopen-s-wfopen-s)
- [Korzystanie z adnotacji SAL w celu zmniejszenia liczby błędów kodu](using-sal-annotations-to-reduce-c-cpp-code-defects.md)
