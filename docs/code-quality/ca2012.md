---
title: 'CA2012: Poprawnie używaj elementów ValueTask'
ms.date: 06/18/2020
ms.topic: reference
f1_keywords:
- UseValueTasksCorrectly
- CA2012
helpviewer_keywords:
- UseValueTasksCorrectly
- CA2012
author: stephentoub
ms.author: stoub
manager: jeffhand
ms.workload:
- multiple
ms.openlocfilehash: 10e71fca9cda048e91f76b329036ea01a2a78b0b
ms.sourcegitcommit: 5caad925ca0b5d136416144a279e984836d8f28c
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/07/2020
ms.locfileid: "89508915"
---
# <a name="ca2012-use-valuetasks-correctly"></a>CA2012: Poprawnie używaj elementów ValueTask

|Element|Wartość|
|-|-|
|CheckId|CA2012|
|Kategoria|Microsoft. niezawodność|
|Zmiana podziału|Nieprzerwanie|

## <a name="cause"></a>Przyczyna

<xref:System.Threading.Tasks.ValueTask>Wystąpienie zwrócone przez wywołanie elementu członkowskiego jest używane w sposób, który może prowadzić do wyjątków, uszkodzenia lub niskiej wydajności.

## <a name="rule-description"></a>Opis reguły

<xref:System.Threading.Tasks.ValueTask> wystąpienia zwracane z wywołań elementów członkowskich mają być bezpośrednio oczekiwane.  Próbuje użyć ValueTask wiele razy lub uzyskać bezpośredni dostęp do wyniku, zanim będzie wiadomo, że może to spowodować wyjątek lub uszkodzenie.  Takie ValueTask jest prawdopodobnie oznaką funkcjonalnej usterki i może obniżyć wydajność.

## <a name="how-to-fix-violations"></a>Jak naprawić naruszenia

Ogólnie rzecz biorąc, ValueTasks powinna być bezpośrednio oczekiwana, a nie w innych lokalizacjach, takich jak zmienne lokalne lub pola.

## <a name="when-to-suppress-warnings"></a>Kiedy pominąć ostrzeżenia

Dla ValueTasks zwracanych z dowolnych wywołań elementów członkowskich obiekt wywołujący musi założyć, że ValueTask musi być zużyty (np. oczekujący) i tylko raz.  Jeśli jednak programista kontroluje również wywoływany element członkowski i ma pełną wiedzę na temat jego implementacji, programista może wiedzieć, że jest bezpieczny, aby pominąć ostrzeżenie, na przykład jeśli Return ValueTask zawsze otacza <xref:System.Threading.Tasks.Task> obiekt.

## <a name="see-also"></a>Zobacz także

- [Ostrzeżenia dotyczące niezawodności](../code-quality/reliability-warnings.md)
