---
title: C6381
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6381
helpviewer_keywords:
- C6381
ms.assetid: c01a3040-26d4-47ac-b72d-7e1292ca435f
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: fd99074cba9e950e9a77d924c16c4b6b9d1c8a96
ms.sourcegitcommit: 485ffaedb1ade71490f11cf05962add1718945cc
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/16/2019
ms.locfileid: "72449586"
---
# <a name="c6381"></a>C6381
Ostrzeżenie C6381: zamknięcie interfejsu API \<function > wymaga prawidłowego prawidłowych dwreason lub lpMessage

To ostrzeżenie jest generowane, jeśli InitiateSystemShutdownEx jest wywoływana:

- Bez przechodzenia do prawidłowej przyczyny zamknięcia (prawidłowych dwreason). Jeśli parametr prawidłowych dwreason ma wartość zero, wartością domyślną jest niezdefiniowane zamknięcie. Domyślnie jest to również nieplanowane wyłączenie. Dla tego parametru należy użyć jednego z kodów przyczyn zamknięcia systemu.

- Bez przekazywania komunikatu zamknięcia (lpMessage).

Zalecamy używanie odpowiednich parametrów podczas wywoływania tego interfejsu API, aby pomóc administratorom systemu określić przyczynę zamknięcia.

## <a name="example"></a>Przykład

Poniższy kod generuje to ostrzeżenie, ponieważ prawidłowych dwreason ma wartość zero, a lpMessage ma wartość null:

```cpp
void f()
{
  //...
  BOOL bRet;
  bRet = InitiateSystemShutdownEx( NULL,
                                   NULL, // message
                                   0,
                                   FALSE,
                                   TRUE,
                                   0);  // shutdown reason
  // ...
}
```

Aby poprawić to ostrzeżenie, należy określić prawidłowych dwreason i lpMessage, jak pokazano w poniższym kodzie:

```cpp
#include <windows.h>
void f()
{
  //...
  BOOL bRet;
  bRet = InitiateSystemShutdownEx( NULL,
                               "Hardware Failure",  // message
                               0,
                               FALSE,
                               TRUE,
                               SHTDN_REASON_MAJOR_HARDWARE ); // reason
  // ...
}
```
